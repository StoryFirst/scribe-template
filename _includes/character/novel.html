<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
  <!-- Header Section -->
  <div class="bg-white rounded-lg shadow-lg overflow-hidden mb-6">
    <div class="md:flex">
      <!-- Character Image -->
      {% if page.image_url %}
      <div class="md:flex-shrink-0">
        <img class="h-96 w-full md:w-96 object-cover" src="{{ page.image_url }}" alt="{{ page.name }}">
      </div>
      {% endif %}

      <!-- Character Header Info -->
      <div class="p-8 flex-1">
        <div class="flex items-center gap-2 mb-2">
          <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-purple-100 text-purple-800">
            Character
          </span>
        </div>

        <h1 class="text-4xl font-bold text-gray-900 mb-2">{{ page.name }}</h1>

        {% if page.caption %}
        <p class="text-xl text-gray-600 mb-4">{{ page.caption }}</p>
        {% endif %}

        {% if page.description %}
        <div class="text-gray-700 mb-4 prose max-w-none"><div class="content">{{ page.description | markdownify }}</div></div>
        {% endif %}
      </div>
    </div>
  </div>

  <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
    <!-- Main Content Column -->
    <div class="lg:col-span-2 space-y-6">
      <!-- Character Content/Biography -->
      {% if content != "" and content != nil %}
      <div class="bg-white rounded-lg shadow p-6">
        <h2 class="text-2xl font-bold text-gray-900 mb-4">Biography</h2>
        <div class="prose max-w-none text-gray-700 content">
          {{ content }}
        </div>
      </div>
      {% endif %}

      <!-- Personality Summary -->
      {% if page.personality_description %}
      <div class="bg-white rounded-lg shadow p-6">
        <h2 class="text-2xl font-bold text-gray-900 mb-4">Personality</h2>
        <div class="text-gray-700 prose max-w-none"><div class="content">{{ page.personality_description | markdownify }}</div></div>
      </div>
      {% endif %}

      <!-- Relationships -->
      {% if page.character_relationships.size > 0 %}
      <div class="bg-white rounded-lg shadow p-6">
        <h2 class="text-2xl font-bold text-gray-900 mb-4">Relationships</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
          {% for relationship in page.character_relationships %}
          {% assign related_character = site.characters | where: "scribe_id", relationship.id | first %}
          <div class="bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-md transition-shadow">
            {% if related_character %}
            <a href="{{ related_character.url | relative_url }}" class="block">
              {% if related_character.image_url %}
              <img src="{{ related_character.image_url }}" alt="{{ relationship.name }}" class="w-full h-48 object-cover">
              {% endif %}
              <div class="p-4">
                <h3 class="font-semibold text-gray-900 hover:text-blue-600">{{ relationship.name }}</h3>
                {% if relationship.caption %}
                <p class="text-sm text-gray-500 mt-1">{{ relationship.caption }}</p>
                {% endif %}
              </div>
            </a>
            {% else %}
              {% if related_character.image_url %}
              <img src="{{ related_character.image_url }}" alt="{{ relationship.name }}" class="w-full h-48 object-cover">
              {% endif %}
              <div class="p-4">
                <h3 class="font-semibold text-gray-900">{{ relationship.name }}</h3>
                {% if relationship.caption %}
                <p class="text-sm text-gray-500 mt-1">{{ relationship.caption }}</p>
                {% endif %}
              </div>
            {% endif %}
          </div>
          {% endfor %}
        </div>
      </div>
      {% endif %}
    </div>

    <!-- Sidebar Column -->
    <div class="space-y-6">
      <!-- Appearance -->
      {% if page.apperance_identity or page.apperance_height or page.apperance_weight or page.apperance_hair_color or page.apperance_eye_color or page.apperance_build or page.apperance_fashion %}
      <div class="bg-white rounded-lg shadow p-6">
        <h2 class="text-xl font-bold text-gray-900 mb-4">Appearance</h2>
        <dl class="space-y-3">
          {% if page.apperance_identity %}
          <div>
            <dt class="text-sm font-medium text-gray-500">Identity</dt>
            <dd class="text-gray-900 capitalize">{{ page.apperance_identity }}</dd>
          </div>
          {% endif %}

          {% if page.apperance_height %}
          <div>
            <dt class="text-sm font-medium text-gray-500">Height</dt>
            <dd class="text-gray-900">
              {% assign feet = page.apperance_height | divided_by: 12 %}
              {% assign inches = page.apperance_height | modulo: 12 %}
              {{ feet }}'{{ inches }}"
            </dd>
          </div>
          {% endif %}

          {% if page.apperance_weight %}
          <div>
            <dt class="text-sm font-medium text-gray-500">Weight</dt>
            <dd class="text-gray-900">{{ page.apperance_weight }} lbs</dd>
          </div>
          {% endif %}

          {% if page.apperance_build %}
          <div>
            <dt class="text-sm font-medium text-gray-500">Build</dt>
            <dd class="text-gray-900 capitalize">{{ page.apperance_build }}</dd>
          </div>
          {% endif %}

          {% if page.apperance_hair_color %}
          <div>
            <dt class="text-sm font-medium text-gray-500">Hair Color</dt>
            <dd class="text-gray-900">{{ page.apperance_hair_color }}</dd>
          </div>
          {% endif %}

          {% if page.apperance_eye_color %}
          <div>
            <dt class="text-sm font-medium text-gray-500">Eye Color</dt>
            <dd class="text-gray-900">{{ page.apperance_eye_color }}</dd>
          </div>
          {% endif %}

          {% if page.apperance_fashion %}
          <div>
            <dt class="text-sm font-medium text-gray-500 mb-1">Fashion</dt>
            <dd class="text-gray-900 text-sm prose prose-sm max-w-none"><div class="content">{{ page.apperance_fashion | markdownify }}</div></dd>
          </div>
          {% endif %}
        </dl>
      </div>
      {% endif %}
    </div>
  </div>
</div>
